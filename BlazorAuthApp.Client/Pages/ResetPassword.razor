@page "/reset-password"
@using BlazorAuthApp.Shared.Models
@using Microsoft.AspNetCore.WebUtilities
@inject HttpClient Http
@inject NavigationManager NavigationManager

@* <div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card mt-5">
            <div class="card-header">
                <h3>Réinitialisation du mot de passe</h3>
            </div>
            <div class="card-body">
                @if (showErrors)
                {
                    <div class="alert alert-danger">
                        <p>@error</p>
                    </div>
                }

                @if (resetSuccessful)
                {
                    <div class="alert alert-success">
                        <p>Votre mot de passe a été réinitialisé avec succès !</p>
                    </div>
                    <div class="text-center mt-3">
                        <a href="/login" class="btn btn-primary">Se connecter</a>
                    </div>
                }
                else if (invalidRequest)
                {
                    <div class="alert alert-danger">
                        <p>Le lien de réinitialisation est invalide ou a expiré.</p>
                    </div>
                    <div class="text-center mt-3">
                        <a href="/forgot-password" class="btn btn-primary">Demander un nouveau lien</a>
                    </div>
                }
                else
                {
                    <EditForm Model="@resetPasswordModel" OnValidSubmit="HandleResetPassword">
                        <DataAnnotationsValidator />
                        
                        <div class="form-group mb-3">
                            <label for="newPassword">Nouveau mot de passe :</label>
                            <InputText id="newPassword" @bind-Value="resetPasswordModel.NewPassword" type="password" class="form-control" />
                            <ValidationMessage For="@(() => resetPasswordModel.NewPassword)" />
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="confirmPassword">Confirmez le mot de passe :</label>
                            <InputText id="confirmPassword" @bind-Value="confirmPassword" type="password" class="form-control" />
                            @if (!string.IsNullOrEmpty(passwordMatchError))
                            {
                                <div class="text-danger">@passwordMatchError</div>
                            } *@